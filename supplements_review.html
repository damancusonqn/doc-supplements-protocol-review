<!DOCTYPE html>
<!-- **** MIT License ****
 
Copyright (c) 2026 Daniel Mancuso and OhmTech UG (haftungsbeschränkt)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.-->

<!-- Description and instructions in the post linked below:
https://www.linkedin.com/posts/damancuso_notasaas-sideproject-opensource-activity-7414351537960894464-lAUN?utm_source=share&utm_medium=member_desktop&rcm=ACoAAAdUL-MBol5Coc_7ySQISNe8Cr6_sRsdfs4
-->
<script>
// ============================================
// --- USER DATA SECTION (EDIT THIS) ---
// ============================================
// 
// INSTRUCTIONS:
// 1. Edit the MY_DATA object below with YOUR supplement information
// 2. Update patientName with your name/visit info
// 3. Add/edit supplements in the 'current' array (what you're taking now)
// 4. Add/edit supplements in the 'considered' array (what you're thinking about)
// 5. Save the file and open it in a browser
//
// FORMAT FOR EACH SUPPLEMENT:
// {
//     id: 'c1',                    // Unique ID: 'c1', 'c2', etc. for current; 'q1', 'q2', etc. for considered
//     name: "Supplement Name",     // The supplement name
//     dose: "1000mg",              // Dosage information
//     category: "Category",        // Optional: e.g., "Performance", "Sleep/Collagen", "Heart/Brain"
//     note: "Your note here",     // Your question or note for the doctor
//     status: 'Continue',          // For 'current': 'Continue', 'Modify', or 'Discontinue'
//                                  // For 'considered': use null
//     time: 'Morning'              // 'Morning', 'Afternoon', or 'Night'
// }
//
// ============================================

const MY_DATA = {
    version: "1.9",
    patientName: "Daniel 'XXX' - Lichtemberg praxis -  6/01/2026",
    viewMode: "desktop",  // "desktop" or "tablet" default is desktop
    
    // Current supplements you're taking
    current: [
        { id: 'c5', name: "Creatine Monohydrate", dose: "4000mg", category: "Performance", note: "I feel better with 4g, less water retention", status: 'Continue', time: 'Morning' },
        { id: 'c6', name: "MCT:C8 Oil", dose: "15ml", category: "Keto/Energy", note: "Now is OK with my stomack! ", status: 'Continue', time: 'Morning' },
        { id: 'c1', name: "Vitamin D3 + K2-MK7", dose: "10,000 IU + 200mcg", category: "Bone/Immune", note: "Dose too high?", status: 'Continue', time: 'Morning' },
        { id: 'c2', name: "Glycine", dose: "10g", category: "Sleep/Collagen", note: "Powder form; for sleep quality.", status: 'Continue', time: 'Night' },
        { id: 'c3', name: "Vitamin C", dose: "1000mg", category: "Antioxidant", note: "is dosis ok?", status: 'Modify', time: 'Morning' },
        { id: 'c4', name: "B-Complex (Methylated)", dose: "1 Cap", category: "Energy/Nerves", note: "Full spectrum B1-B12.", status: 'Continue', time: 'Morning' },
        { id: 'c7', name: "Magnesium Glycinate", dose: "1500mg (300mg elem.)", category: "Sleep/Muscles", note: "Highly bioavailable; no laxative effect.", status: 'Continue', time: 'Night' },
        { id: 'c8', name: "L-Theanine", dose: "200mg", category: "Focus/Calm", note: "Take with coffee to reduce jitters.", status: 'Continue', time: 'Morning' },
        { id: 'c9', name: "Ashwagandha KSM-66", dose: "600mg", category: "Stress", note: "30mg Withanolides. Helps with anxiety.", status: 'Modify', time: 'Night' },
        { id: 'c10', name: "Probiotics (Multi-Strain)", dose: "50 Billion CFU", category: "Gut Health", note: "Useful for keto or a 'scam'?", status: 'Modify', time: 'Morning' },
        { id: 'c11', name: "Omega-3 (EPA/DHA)", dose: "2000mg", category: "Heart/Brain", note: "High strength IFOS certified.", status: 'Continue', time: 'Afternoon' },
        { id: 'c12', name: "Coenzyme Q10 (Ubiquinol)", dose: "100mg", category: "Heart/Mito", note: "Essential for mitochondrial energy.", status: 'Continue', time: 'Morning' },
        { id: 'c13', name: "N-Acetyl-L-Cysteine (NAC)", dose: "800mg", category: "Detox/Lung", note: "Glutathione precursor.", status: 'Continue', time: 'Afternoon' }
    ],
    
    // Supplements you're considering adding
    considered: [
        { id: 'q1', name: "Methylene Blue", dose: "0.5mg/kg", category: "Nootropic", note: "Never tried. Mitochondrial support?", status: null, time: 'Morning' },
        { id: 'q2', name: "Keto BHB Salts", dose: "10g", category: "Keto/Fuel", note: "For transition or deep ketosis?", status: null, time: 'Afternoon' },
        { id: 'q3', name: "Zinc + Selenium", dose: "15mg / 200mcg", category: "Immune/Thyroid", note: "Should I add for hormonal support?", status: null, time: 'Night' },
        { id: 'q4', name: "Electrolytes (K/Na/Mg)", dose: "Varies", category: "Keto/Hydration", note: "Essential to prevent 'Keto Flu'.", status: null, time: 'Morning' }
    ]
};

// ============================================
// --- END OF USER DATA SECTION ---
// ============================================
// DO NOT EDIT BELOW THIS LINE
// The rest of this file contains the application logic.
// ============================================
</script>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Review - Supplements protocol</title>
    <style>
        :root { --primary: #2c3e50; --accent: #007bff; --bg: #f4f7f6; --card-bg: #ffffff; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); padding: 15px; max-width: 1100px; margin: 0 auto; color: #333; line-height: 1.2; }
        
        /* DENSE DESKTOP OVERRIDES */
        body.desktop-mode { max-width: 1400px; }
        .desktop-mode .card { grid-template-columns: 320px 1fr; gap: 15px; padding: 12px; margin-bottom: 10px; }
        .desktop-mode .doctor-zone { display: flex; align-items: flex-start; gap: 20px; flex-wrap: nowrap; }
        .desktop-mode .btn-group-wrapper { flex: 0 1 auto; min-width: 130px; }
        .desktop-mode .suggestion-grid { grid-template-columns: 1fr 1fr !important; gap: 15px; }

        #main-content { padding-bottom: 200px; }

        header { position: sticky; top: 0; background: var(--bg); padding: 10px 0; z-index: 100; border-bottom: 2px solid var(--primary); margin-bottom: 15px; }
        .header-top { display: flex; justify-content: space-between; align-items: center; }
        h1 { margin: 0; font-size: 1.6rem; color: var(--primary); }
        .sub-header { color: #666; font-size: 0.9rem; margin-top: 2px; font-weight: 600; }
        
        .mode-switcher { display: flex; gap: 2px; background: #ddd; padding: 3px; border-radius: 6px; }
        .mode-btn { border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; font-weight: bold; color: #555; }
        .mode-btn.active { background: var(--primary); color: white; }

        /* Intro Box */
        .intro { background: #e8f4fd; padding: 15px; border-radius: 8px; border-left: 8px solid #2196F3; margin-bottom: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .intro p { margin: 0; font-size: 1rem; color: #2c3e50; }

        .section-title { background: var(--primary); color: white; padding: 8px 15px; border-radius: 4px; margin: 20px 0 10px 0; font-size: 1.1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .section-desc { font-size: 0.85rem; color: #666; margin-bottom: 15px; padding-left: 5px; font-style: italic; }
        
        .card { background: var(--card-bg); border-radius: 8px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: grid; grid-template-columns: 1fr; border: 1px solid #e0e0e0; transition: background 0.2s; }
        .card.current { border-left: 8px solid #2196F3; }
        .card.consider { border-left: 8px solid #9C27B0; }
        .card.suggestion { border: 2px dashed #009688; background: #fafafa; display: block !important; padding: 15px; }

        .supp-name { font-size: 1.15rem; font-weight: 800; color: var(--primary); display: block; }
        .supp-dose { font-size: 0.85rem; font-weight: bold; color: #444; background: #e9ecef; padding: 2px 10px; border-radius: 12px; display: inline-block; margin: 4px 0; }
        .category-tag { font-size: 0.65rem; text-transform: uppercase; background: #34495e; color: white; padding: 2px 6px; border-radius: 3px; margin-bottom: 5px; display: inline-block; font-weight: bold; }
        
        .user-note { margin-top: 8px; font-size: 0.85rem; color: #444; background: #fffde7; padding: 8px; border-radius: 4px; border: 1px solid #fff9c4; line-height: 1.3; }
        .user-note strong { font-size: 0.7rem; color: #856404; text-transform: uppercase; }

        .label-text { font-size: 0.7rem; font-weight: 800; color: #777; text-transform: uppercase; margin-bottom: 4px; display: block; letter-spacing: 0.3px; }

        .btn-group { display: flex; gap: 4px; margin-bottom: 8px; }
        .choice-btn { flex: 1; padding: 8px 2px; border: 1px solid #ccc; border-radius: 4px; background: white; font-size: 0.75rem; font-weight: bold; cursor: pointer; }
        .choice-btn.active[data-val="Continue"], .choice-btn.active[data-val="YES"] { background: #2e7d32; color: white; border-color: #1b5e20; }
        .choice-btn.active[data-val="Discontinue"], .choice-btn.active[data-val="NO"] { background: #c62828; color: white; border-color: #b71c1c; }
        .choice-btn.active[data-val="Modify"], .choice-btn.active[data-val="Later"] { background: #fbc02d; color: #000; border-color: #f9a825; }
        .choice-btn.time.active { background: #1565c0; color: white; }
        
        .priority-btn { width: 34px; height: 34px; border-radius: 4px; border: 1px solid #ccc; background: white; font-size: 0.85rem; font-weight: bold; cursor: pointer; }
        .priority-btn.active { background: #ef6c00; color: white; border-color: #e65100; box-shadow: 0 2px 4px rgba(239,108,0,0.3); }

        input[type="text"] { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 0.9rem; margin-top: 5px; box-sizing: border-box; }
        input::placeholder { color: #999; font-style: italic; font-size: 0.85rem; }
        
        .finish-btn { width: 100%; padding: 22px; background: #2e7d32; color: white; font-size: 1.4rem; font-weight: bold; border: none; border-radius: 10px; margin-top: 40px; cursor: pointer; box-shadow: 0 4px 12px rgba(46,125,50,0.3); }
        .pdf-btn { background: #c62828; color: white; padding: 14px; border-radius: 6px; font-weight: bold; width: 100%; margin-top: 10px; cursor: pointer; border: none; font-size: 1.1rem; }

        #result-area { margin-top: 30px; background: white; padding: 25px; border-radius: 10px; border: 2px solid var(--primary); }
        #output-text { width: 100%; height: 400px; font-family: 'Courier New', monospace; font-size: 1rem; margin-top: 12px; background: #fcfcfc; padding: 15px; border: 1px solid #ddd; border-radius: 6px; white-space: pre; }

        @media print {
            header, .section-title, .section-desc, .intro, .mode-switcher, .finish-btn, #result-area, .suggestion-grid { display: none !important; }
            #print-output { display: block !important; font-size: 11pt; padding: 30px; }
        }
    </style>
</head>
<body class="desktop-mode">

<header>
    <div class="header-top">
        <h1>Dr. Review - Supplements protocol <small style="font-size: 0.5em; color: #999;">v1.9</small></h1>
        <div class="mode-switcher">
            <button id="btn-tablet" class="mode-btn" onclick="setView('tablet')">Tablet</button>
            <button id="btn-desktop" class="mode-btn active" onclick="setView('desktop')">Desktop</button>
        </div>
    </div>
    <div class="sub-header" id="patient-display">Loading...</div>
</header>

<div id="main-content">
    <div class="intro">
        <p><strong>Dr. Instructions:</strong> Set Action, Timing, and 1-5 Necessity Priority for each item to generate the final protocol.</p>
    </div>

    <div class="section-title">1. Current Protocol</div>
    <p class="section-desc">Review existing routine: confirm if each item should be continued, stopped, or adjusted.</p>
    <div id="section-current"></div>

    <div class="section-title">2. New Items to Consider</div>
    <p class="section-desc">Evaluate potential additions based on patient interest or new health goals.</p>
    <div id="section-considered"></div>

    <div class="section-title">3. Doctor's New Suggestions</div>
    <p class="section-desc">Add entirely new prescriptions or supplements not listed above.</p>
    <div class="suggestion-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
        <div class="card suggestion">
            <span class="label-text">Suggestion A</span>
            <input type="text" id="new-name-1" placeholder="Supplement name (e.g. Zinc)">
            <input type="text" id="new-dose-1" placeholder="Dose (e.g. 11 mg)">
            <input type="text" id="new-note-1" placeholder="Dr. Instructions (e.g. 'Morning, only 2 weeks!')">
        </div>
        <div class="card suggestion">
            <span class="label-text">Suggestion B</span>
            <input type="text" id="new-name-2" placeholder="Supplement name (e.g. Vitamin B12)">
            <input type="text" id="new-dose-2" placeholder="Dose (e.g. 1000 mcg)">
            <input type="text" id="new-note-2" placeholder="Dr. Instructions">
        </div>
    </div>

    <button class="finish-btn" onclick="generateReport()">Generate Final Summary Report</button>

    <div id="result-area" style="display:none;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h3 style="margin:0; color: var(--primary);">Summary Report Preview</h3>
            <button onclick="copyToClipboard()" style="padding:10px 20px; cursor:pointer; font-weight:bold; background: var(--accent); color:white; border:none; border-radius:5px;">Copy Text</button>
        </div>
        <textarea id="output-text" readonly></textarea>
        <button class="pdf-btn" onclick="prepareAndPrint()">Export as PDF / Print Summary</button>
    </div>
</div>

<div id="print-output" style="display:none; white-space: pre-wrap; font-family: monospace;"></div>


<script>
// ============================================
// --- APPLICATION LOGIC (DO NOT EDIT) ---
// ============================================
// This section contains the app functionality.
// Editing this may break the application.
// ============================================

    const sessionData = {};
    const APP_VERSION = "1.9";

    function setView(mode) {
        const body = document.body;
        const btnT = document.getElementById('btn-tablet');
        const btnD = document.getElementById('btn-desktop');
        const display = document.getElementById('patient-display');
        const name = (typeof MY_DATA !== 'undefined') ? MY_DATA.patientName : "Patient";

        if (mode === 'desktop') {
            body.classList.add('desktop-mode');
            btnD.classList.add('active');
            btnT.classList.remove('active');
            display.innerText = `Reviewing for [${name}] • Desktop Mode`;
        } else {
            body.classList.remove('desktop-mode');
            btnT.classList.add('active');
            btnD.classList.remove('active');
            display.innerText = `Reviewing for [${name}] • Lenovo Tab P11 Mode`;
        }
    }

    function initApp() {
        if (typeof MY_DATA === 'undefined') {
            document.body.innerHTML = "<div style='padding:50px; color:red; font-weight:bold;'>Error: 'supplements_v14.js' not found.</div>";
            return;
        }

        setView('desktop');

        [...MY_DATA.current, ...MY_DATA.considered].forEach(item => {
            sessionData[item.id] = { status: item.status || null, time: item.time || 'AM', priority: null };
        });

        renderSection(MY_DATA.current, 'section-current', ['Continue', 'Discontinue', 'Modify']);
        renderSection(MY_DATA.considered, 'section-considered', ['YES', 'NO', 'Later']);
    }

    function renderSection(list, containerId, statusOptions) {
        const container = document.getElementById(containerId);
        list.forEach(item => {
            const card = document.createElement('div');
            card.className = `card ${containerId === 'section-current' ? 'current' : 'consider'}`;
            
            card.innerHTML = `
                <div class="info-side">
                    <span class="category-tag">${item.category || 'General'}</span><br>
                    <span class="supp-name">${item.name}</span> 
                    <span class="supp-dose">${item.dose}</span>
                    <div class="user-note"><strong>Patient Note:</strong> ${item.note}</div>
                </div>
                <div class="doctor-zone">
                    <div class="btn-group-wrapper">
                        <span class="label-text">Action</span>
                        <div class="btn-group">
                            ${statusOptions.map(opt => `<button class="choice-btn ${sessionData[item.id].status === opt ? 'active' : ''}" data-val="${opt}" onclick="update('${item.id}', 'status', '${opt}', this)">${opt}</button>`).join('')}
                        </div>
                    </div>
                    <div class="btn-group-wrapper">
                        <span class="label-text">Timing</span>
                        <div class="btn-group">
                            ${['AM', 'PM', 'Night'].map(t => `<button class="choice-btn time ${sessionData[item.id].time === t ? 'active' : ''}" onclick="update('${item.id}', 'time', '${t}', this)">${t}</button>`).join('')}
                        </div>
                    </div>
                    <div class="btn-group-wrapper">
                        <span class="label-text">Priority (1=LOW, 5=ESSENTIAL)</span>
                        <div class="btn-group">
                            ${[1,2,3,4,5].map(p => `<button class="priority-btn" onclick="update('${item.id}', 'priority', ${p}, this)">${p}</button>`).join('')}
                        </div>
                    </div>
                    <div style="flex: 2;">
                        <span class="label-text">Doctor Instructions</span>
                        <input type="text" placeholder="e.g. '2 months on, 1 off' or 'lower dose to 500mg'" id="comment-${item.id}">
                    </div>
                </div>
            `;
            container.appendChild(card);
        });
    }

    function update(id, field, value, btn) {
        sessionData[id][field] = value;
        Array.from(btn.parentElement.children).forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
    }

    function copyToClipboard() {
        const el = document.getElementById("output-text");
        el.select();
        document.execCommand("copy");
        alert("Report copied to clipboard!");
    }

    function generateReport() {
        let report = `SUPPLEMENT REVIEW SUMMARY (v${APP_VERSION})\n========================================\n`;
        report += `Date: ${new Date().toLocaleDateString()}\nPatient: ${MY_DATA.patientName}\n\n`;
        
        const process = (list, title) => {
            report += `[ ${title} ]\n`;
            list.forEach(item => {
                const s = sessionData[item.id];
                const note = document.getElementById(`comment-${item.id}`).value;
                if(s.status) {
                    const priorityText = s.priority ? `Priority: ${s.priority}/5` : "Priority: -";
                    report += `• ${item.name} [${item.dose}] -> ${s.status} (${s.time}) ${priorityText}\n`;
                    if (note) report += `\tInstructions: ${note}\n`;
                    report += "\n";
                }
            });
        };

        process(MY_DATA.current, "CURRENT PROTOCOL");
        process(MY_DATA.considered, "NEW ITEMS EVALUATED");

        report += "[ DOCTOR'S NEW SUGGESTIONS ]\n";
        for (let i = 1; i <= 2; i++) {
            const n = document.getElementById(`new-name-${i}`).value;
            if (n) {
                const d = document.getElementById(`new-dose-${i}`).value || 'N/A';
                const inst = document.getElementById(`new-note-${i}`).value || 'N/A';
                report += `• ${n} [${d}]\n\tInstructions: ${inst}\n\n`;
            }
        }

        document.getElementById('output-text').value = report;
        document.getElementById('print-output').innerText = report;
        document.getElementById('result-area').style.display = 'block';
        window.scrollTo(0, document.body.scrollHeight);
    }

    function prepareAndPrint() {
        generateReport();
        setTimeout(() => { window.print(); }, 250);
    }

    initApp();
</script>
</body>
</html>